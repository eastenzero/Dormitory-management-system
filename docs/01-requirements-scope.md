# 需求分析与范围界定

## 1. 用户故事（MVP）
### 1.1 宿舍管理员（DORM_MANAGER）
- 维护楼栋/房间/床位信息，查看空[text](.)床。
- 按学生信息分配床位并办理入住。
- 学生退宿、调宿，系统自动记录历史。
- 处理报修：指派给维修人员、跟踪状态、关闭工单。
- 登记访客出入（或审批学生提交的访客申请）。

### 1.2 学生（STUDENT）
- 登录后查看个人床位与宿舍信息。
- 提交报修（描述、图片），查看处理进度并评价。
- 提交访客登记申请/或查看访客登记结果。
- 查看通知公告。

### 1.3 学校管理员（SCHOOL_ADMIN）
- 管理系统用户、角色、权限。
- 学生档案维护（导入可放二期）。
- 查看全局统计报表。

## 2. 功能模块拆分
- 系统管理：用户、角色、权限、菜单（前端路由）、字典
- 基础数据：楼栋、房间、床位
- 学生管理：学生档案、班级/学院（可选）
- 入住管理：分配、入住、退宿、调宿、历史
- 报修管理：工单、指派、处理、评价、附件
- 访客管理：访客记录/审批（按学校实际选）
- 公告管理：发布、置顶、定向可见
- 报表统计：床位、入住、报修
- 审计日志：关键动作

## 3. 权限粒度（示例）
- `sys:user:read` `sys:user:write`
- `dorm:building:read` `dorm:building:write`
- `dorm:assignment:write`（分配/调宿/退宿）
- `repair:order:read` `repair:order:write` `repair:order:assign`
- `notice:write`

## 4. 关键约束与校验
- 床位分配必须校验：
  - 床位状态=可用
  - 房间性别限制匹配
  - 学生当前无有效分配
- 退宿/调宿必须记录：操作人、时间、原因。

## 5. MVP 验收标准（摘要）
- 能完成：创建楼栋/房间/床位 -> 创建学生 -> 分配床位并入住 -> 调宿/退宿 -> 查看历史。
- 学生可提交报修，管理员可指派，维修可处理并关闭，学生可评价。
- 角色权限生效：不同角色看到不同菜单与接口权限。
