# 学生宿舍管理系统（Dormitory Management System）总体规划

## 1. 目标
- 为学校/学院提供宿舍楼栋、房间、床位、学生入住/退宿/调宿、报修、访客登记、通知公告、统计报表等能力。
- 支持多角色、多权限、可审计、可扩展。

## 2. 技术栈（建议默认）
- 前端：Vue 3 + TypeScript + Vite + Vue Router + Pinia + Element Plus + Axios
- 后端：Spring Boot 3（Java 17）+ Spring Security + JWT + MyBatis-Plus + Validation + Springdoc OpenAPI
- 数据库：MySQL 8（Flyway 管理版本迁移）
- 可选：Redis（验证码/黑名单 token/热点缓存）、MinIO（附件存储）、MQ（异步通知）

## 3. 关键原则
- 统一接口风格：`/api/v1` 前缀；统一响应结构；统一错误码。
- RBAC：用户-角色-权限，前后端统一以 `permissionCode` 为授权粒度。
- 可审计：关键操作（分配床位、退宿、修改房间信息、审批等）记录操作日志。
- 可演进：先实现 MVP，预留二期功能（缴费、卫生检查、晚归签到、设备对接）。

## 4. 角色（建议）
- SUPER_ADMIN：系统超管（全局配置、租户/学校、权限管理）
- SCHOOL_ADMIN：学校管理员（人员、宿舍基础数据、全局报表）
- DORM_MANAGER：宿舍管理员（分配床位、调宿、退宿、访客、报修处理）
- COUNSELOR：辅导员/班主任（查看本学院/班级住宿情况、统计）
- STUDENT：学生（查看床位、提交报修、访客登记申请、查看通知）
- REPAIR_STAFF：维修人员（处理工单）
- FINANCE：财务（若启用缴费模块）

## 5. MVP 功能范围
- 认证与权限：登录/登出、用户管理、角色权限
- 宿舍资源：楼栋/楼层/房间/床位管理（容量、性别限制、状态）
- 学生与入住：学生档案、分配床位、入住/退宿、调宿、入住历史
- 报修工单：提交/指派/处理/关闭/评价
- 访客登记：登记/审批（可选）/出入记录
- 通知公告：发布、置顶、按角色可见
- 统计报表：床位使用率、空床、楼栋入住概览、报修统计
- 操作日志：关键增删改与业务动作

## 6. 二期（可选）
- 缴费与账单、欠费提醒
- 卫生检查评分、通报
- 晚归/出入签到、与门禁设备对接
- Excel 导入导出（学生/床位分配）

## 7. 工程建议结构（生成后）
- `dormitory-admin-web/`：前端管理端
- `dormitory-server/`：后端服务
- `docs/`：规划与契约
- `prompts/`：各部门 AI 提示词

## 8. 需要你确认的关键业务规则（默认假设）
- 默认按“学校单租户”实现（不做多学校隔离）；若要多租户需补充。
- 房间可配置性别限制（男/女/混住/不限）。
- 一个学生同一时间仅允许有一个有效床位分配。
- 退宿/调宿将生成历史记录，可追溯。
